# 익명 투표 생성/참여 - 상세 기능 기획서

## 기능 개요
시스템에서 제공하는 미리 정의된 칭찬 질문(예: "가장 잘생긴 사람은?")을 Circle에 투표로 생성하고, Circle 멤버들이 다른 멤버들 중에서 선택하여 익명 투표하는 핵심 기능

## 상세 기능 명세

### 1. 투표 생성 (Poll Creation)

#### 1.1 투표 생성 플로우
1. **Create 탭** 접근
2. **질문 템플릿 선택**
   - 미리 정의된 칭찬 질문 리스트에서 선택
   - 예시: "가장 잘생긴 사람은?", "가장 친절한 사람은?", "오늘 머리가 가장 예쁜 사람은?"
   - 카테고리별 분류 (외모, 성격, 패션, 재능 등)
3. **선택지 자동 생성**
   - Circle 멤버 전체 목록이 선택지로 자동 설정
   - 투표 생성자는 선택지에서 자동 제외
   - 최대 Circle 인원수(50명)까지 자동 포함
4. **투표 설정**
   - 투표 마감 시간 설정 (1시간/3시간/6시간/24시간)
   - 익명 보장 설정 (기본값: ON, 변경 불가)
5. **미리보기** 확인 (질문 + Circle 멤버 리스트)
6. **투표 생성** 완료

#### 1.2 질문 템플릿 관리
**카테고리별 질문 예시:**
- **외모**: "가장 잘생긴/예쁜 사람은?", "오늘 패션이 가장 멋진 사람은?", "미소가 가장 예쁜 사람은?"
- **성격**: "가장 친절한 사람은?", "가장 재밌는 사람은?", "가장 든든한 사람은?"
- **재능**: "가장 똑똑한 사람은?", "운동을 가장 잘하는 사람은?", "노래를 가장 잘하는 사람은?"
- **특별한 날**: "오늘 기분이 가장 좋아 보이는 사람은?", "가장 열심히 공부하는 사람은?"

#### 1.3 투표 생성 제약사항
- Circle당 동시 진행 가능한 투표: 최대 3개
- 사용자당 일일 투표 생성 제한: 5개 (템플릿 선택이므로 제한 완화)
- Circle 멤버 3명 이상일 때만 투표 생성 가능

#### 1.4 투표 생성 UI/UX 요구사항
- 카테고리별 질문 템플릿 그리드 표시
- 질문 선택 시 Circle 멤버 리스트 미리보기
- 투표 생성 완료 시 성공 애니메이션

### 2. 투표 참여 (Poll Participation)

#### 2.1 투표 참여 플로우
1. **Home 탭**에서 진행 중인 투표 리스트 확인
2. 투표 카드 선택
3. 질문 및 Circle 멤버 선택지 확인
4. Circle 멤버 중 한 명 터치 선택
5. **투표하기** 버튼 터치
6. 투표 완료 확인 메시지
7. 실시간 결과 화면으로 자동 전환

#### 2.2 투표 참여 제약사항
- Circle 멤버만 투표 가능
- 1인 1표 원칙 (중복 투표 불가)
- 투표 후 선택 변경 불가
- 마감된 투표는 참여 불가

#### 2.3 투표 상태 관리
- **진행 중**: 녹색 점 표시, "투표하기" 버튼 활성
- **투표 완료**: 회색 체크 표시, "결과 보기" 버튼
- **마감**: 빨간색 X 표시, "마감된 투표" 텍스트

### 3. 익명성 보장 메커니즘

#### 3.1 기술적 익명성 구현
- 투표 데이터에서 사용자 식별 정보 분리 저장
- 투표 결과 집계 시에만 연결
- 개별 투표 내역은 서버에서도 추적 불가능하게 암호화

#### 3.2 UI상 익명성 표현
- 투표 결과에서 "누가 무엇을 선택했는지" 절대 표시 안함
- "총 X명이 투표했습니다" 형태로만 표시
- 익명 보장 아이콘 상시 표시

### 4. 투표 결과 표시

#### 4.1 결과 시각화
- 가로 막대 그래프 (Circle 멤버별 득표율)
- 총 투표자 수 표시
- 각 Circle 멤버별 득표 수와 백분율 표시
- 1위 멤버 하이라이트 표시 (왕관 아이콘 등)
- 멤버 닉네임 + 득표율로 랭킹 표시

### 5. 에러 케이스 및 예외 처리

#### 5.1 투표 생성 시 에러
- 네트워크 오류: "잠시 후 다시 시도해주세요"
- 부적절한 내용: "부적절한 내용이 포함되어 있습니다"
- 제한 초과: "오늘 투표 생성 횟수를 초과했습니다"

#### 5.2 투표 참여 시 에러
- 이미 투표한 경우: "이미 투표에 참여했습니다"
- 마감된 투표: "투표가 마감되었습니다"
- 권한 없음: "이 투표에 참여할 권한이 없습니다"

## 개발 우선순위
1. **Phase 1**: 기본 투표 생성/참여 로직 구현
2. **Phase 2**: 투표 결과 시각화 구현
3. **Phase 3**: 익명성 보장 메커니즘 강화
4. **Phase 4**: UI/UX 애니메이션 및 에러 처리 완성

## 성공 지표
- 투표 생성 성공률: 95% 이상
- 투표 참여율: Circle당 70% 이상
- 투표 완료 후 결과 확인율: 90% 이상